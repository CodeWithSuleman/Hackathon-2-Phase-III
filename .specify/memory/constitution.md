<!--
---
Sync Impact Report
---
Version change: 0.1.0 → 1.0.0
Modified principles:
- PRINCIPLE_1_NAME → Specification-driven development
- PRINCIPLE_2_NAME → Security-first architecture
- PRINCIPLE_3_NAME → Clear separation of concerns
- PRINCIPLE_4_NAME → Deterministic, reproducible agent execution
- PRINCIPLE_5_NAME → Production-readiness over demo-only shortcuts
Added sections:
- Key Standards
- Technology Constraints
- Security Standards
- Development Constraints
- Functional Requirements
- Quality Requirements
- Success Criteria
Removed sections:
- SECTION_2_NAME
- SECTION_3_NAME
Templates requiring updates:
- ✅ .specify/templates/plan-template.md
- ✅ .specify/templates/spec-template.md
- ✅ .specify/templates/tasks-template.md
-->

# Full-Stack Multi-User Todo Web Application (Agentic Dev Stack) Constitution

## Core Principles

### I. Specification-driven development
Every feature must be traceable to a written specification. No manual coding is permitted; all implementation must be generated by the agent based on the spec.

### II. Security-first architecture
The system must be designed with security as the primary consideration, employing JWT-based authentication and authorization for all protected resources.

### III. Clear separation of concerns
A strict division must be maintained between the frontend, backend, authentication, and data layers to ensure modularity and maintainability.

### IV. Deterministic, reproducible agent execution
The agent's behavior must be deterministic and reproducible to ensure consistent outcomes from the same inputs and specifications.

### V. Production-readiness over demo-only shortcuts
All development must prioritize production-level quality, avoiding shortcuts that are unsuitable for a real-world deployment environment.

## Key Standards
- All features must be traceable to written specifications.
- The REST API must strictly follow defined endpoints and HTTP semantics.
- Authentication must be enforced on every protected route.
- User data isolation must be guaranteed at the API and database level.
- All generated code must align with the declared tech stack only.

## Technology Constraints
- **Frontend**: Next.js 16+ (App Router)
- **Backend**: Python FastAPI
- **ORM**: SQLModel
- **Database**: Neon Serverless PostgreSQL
- **Authentication**: Better Auth (JWT-based)
- No additional frameworks or auth systems are allowed.

## Security Standards
- All API endpoints require valid JWT authentication.
- JWT verification must occur server-side in FastAPI.
- The shared secret must be sourced from environment variables.
- The User ID from the JWT must match the route-level user context.
- Unauthorized requests must return HTTP 401.
- Cross-user data access is strictly forbidden.

## Development Constraints
- No manual code edits are allowed.
- Development must follow the sequence: Spec → Plan → Tasks → Implementation.
- Each phase must be reviewable and auditable.
- The backend and frontend must operate as independent services.
- Stateless authentication is required (no backend session storage).

## Functional Requirements
- Implement all 5 Basic Level Todo features.
- Use persistent storage with PostgreSQL.
- Implement RESTful CRUD operations for tasks.
- Enforce task ownership on every operation.
- The frontend interface must be responsive and multi-user.

## Quality Requirements
- Code must be readable, modular, and maintainable.
- API responses must use consistent schemas.
- Proper error handling and status codes are required.
- Database migrations must be deterministic.
- Configuration must be environment-based (no hardcoded secrets).

## Success Criteria
- All specs are fully implemented without deviations.
- All API endpoints are secured and functional.
- Users can only access their own tasks.
- JWT-based authentication is verified end-to-end.
- The application runs successfully in a real deployment environment.
- The project demonstrates a complete Agentic Dev Stack workflow.

## Governance
This constitution supersedes all other practices. Amendments require documentation, approval, and a migration plan. All pull requests and reviews must verify compliance with this constitution. Complexity must be justified.

**Version**: 1.0.0 | **Ratified**: 2026-01-28 | **Last Amended**: 2026-01-28